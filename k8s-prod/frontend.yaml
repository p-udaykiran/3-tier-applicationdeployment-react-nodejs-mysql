---
# -------------------------------
# 1Ô∏è‚É£ Deployment: Frontend Application
# -------------------------------
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frontend                 # Name of the frontend Deployment
  namespace: webapps             # Deployed into 'webapps' namespace
  labels:
    app: frontend                # Common label for identification
spec:
  replicas: 3                    # Run 3 frontend pods for load balancing & HA
  selector:
    matchLabels:
      app: frontend              # Ensures Deployment manages only pods with this label
  template:
    metadata:
      labels:
        app: frontend            # Pod labels (must match selector above)
    spec:
      containers:
        - name: frontend
          image: udaypagidimari/frontend:latest  # Frontend container image
          ports:
            - containerPort: 80   # Frontend app listens on port 80 (default HTTP)
          # üîπ If frontend needs backend API, add env vars or config here later

---
# -------------------------------
# 2Ô∏è‚É£ Service: Frontend Service
# -------------------------------
apiVersion: v1
kind: Service
metadata:
  name: frontend-svc             # Service name (DNS: frontend-svc.webapps.svc.cluster.local)
  namespace: webapps
  labels:
    app: frontend
spec:
  selector:
    app: frontend                # Routes traffic only to pods with label "app=frontend"
  ports:
    - port: 80                   # Service port (inside cluster)
      targetPort: 80             # Forwards traffic to container's port 80
  type: ClusterIP                # Internal service (use Ingress/LoadBalancer to expose outside)
